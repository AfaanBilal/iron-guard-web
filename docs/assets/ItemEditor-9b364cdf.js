import{u as R,f as z,g as i,c as F,j as G,i as t,b as s,S as v,B as f,t as u,k as H}from"./index-f282f4e2.js";import{r as J,a as K,u as M,b as O,g as U}from"./ItemList-ae8921ee.js";import{I as b}from"./Input-78de07b2.js";import{S as V}from"./Select-9a7777e1.js";import{c as W}from"./CategoryList-6c6dfd73.js";import"./Loading-60228bca.js";import"./NoDataAvailable-f302f0c8.js";const X=u('<span class="ml-4 px-4 py-2 rounded text-xl bg-red-900 text-gray-300"></span>'),Y=u('<h1 class="px-4 py-2 my-4 text-3xl border-b border-b-slate-700"> Item</h1>'),Z=u('<div class="flex-grow p-4 bg-gray-700"><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Name</div><div class="px-2"></div></div><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Description</div><div class="px-2"></div></div><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Quantity</div><div class="px-2"></div></div><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Category</div><div class="px-2"></div></div><div class="flex items-center px-2 py-4 mt-4 border-t border-t-slate-800 gap-2"><div class="flex-grow"></div></div></div>'),ee=u('<div class="flex-grow flex flex-col px-2"></div>'),oe=()=>{const _=R(),y=z(),[n,$]=i(""),[p,h]=i(""),[x,S]=i(0),[g,w]=i(""),[C,I]=i(""),[a,te]=i(_.uuid||""),[m]=F(()=>_.uuid||null,U);G(()=>{if(m()){const e=m();$(e.name),h(e.description),S(e.quantity),w(e.category?.uuid||"")}});const E=async()=>{if(n().trim()===""){I("Please fill in a name.");return}let e=null;a()===""?e=await K(n(),p(),x(),g()):e=await M(a(),n(),p(),x(),g()),e.status===H.Success?(O(),y("/items")):I(e.message)};return(()=>{const e=ee.cloneNode(!0);return t(e,s(v,{get when(){return a()===""||!m.loading},get children(){return[(()=>{const r=Y.cloneNode(!0),c=r.firstChild;return t(r,()=>a()===""?"Add":"Edit",c),t(r,s(v,{get when(){return C()!==""},get children(){const o=X.cloneNode(!0);return t(o,C),o}}),null),r})(),(()=>{const r=Z.cloneNode(!0),c=r.firstChild,o=c.firstChild,q=o.nextSibling,N=c.nextSibling,A=N.firstChild,B=A.nextSibling,k=N.nextSibling,P=k.firstChild,Q=P.nextSibling,T=k.nextSibling,j=T.firstChild,L=j.nextSibling,d=T.nextSibling,D=d.firstChild;return t(q,s(b,{get value(){return n()},onInput:l=>$(l.currentTarget.value)})),t(B,s(b,{get value(){return p()},onInput:l=>h(l.currentTarget.value)})),t(Q,s(b,{type:"number",min:0,get value(){return x()},onInput:l=>S(parseInt(l.currentTarget.value))})),t(L,s(V,{label:"Select a category",get options(){return W()?.results.map(l=>({value:l.uuid,label:l.name}))||[]},get selected(){return g()},onChange:l=>w(l.currentTarget.value)})),t(d,s(f,{label:"Save",onClick:E}),D),t(d,s(f,{label:"Cancel",onClick:()=>window.history.back()}),D),t(d,s(v,{get when(){return a()!==""},get children(){return s(f,{kind:"danger",label:"Delete",onClick:()=>J(a(),y)})}}),null),r})()]}})),e})()};export{oe as default};
