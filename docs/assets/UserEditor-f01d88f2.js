import{u as J,f as K,g as i,c as M,j as O,i as t,b as l,S as b,B as _,t as p,k as Q}from"./index-f282f4e2.js";import{r as V,a as W,u as X,b as Y,g as Z}from"./UserList-b05dbdb0.js";import{I as v}from"./Input-78de07b2.js";import{S as ee}from"./Select-9a7777e1.js";import"./Loading-60228bca.js";import"./NoDataAvailable-f302f0c8.js";const te=p('<span class="ml-4 px-4 py-2 rounded text-xl bg-red-900 text-gray-300"></span>'),le=p('<h1 class="px-4 py-2 my-4 text-3xl border-b border-b-slate-700"> User</h1>'),se=p('<div class="flex-grow p-4 bg-gray-700"><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Firstname</div><div class="px-2"></div></div><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Lastname</div><div class="px-2"></div></div><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Email</div><div class="px-2"></div></div><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Password</div><div class="px-2"></div></div><div class="flex items-center py-2"><div class="px-2 text-slate-300 text-xl w-64">Role</div><div class="px-2"></div></div><div class="flex items-center px-2 py-4 mt-4 border-t border-t-slate-800 gap-2"><div class="flex-grow"></div></div></div>'),re=p('<div class="flex-grow flex flex-col px-2"></div>'),xe=()=>{const $=J(),h=K(),[m,w]=i("user"),[n,S]=i(""),[d,y]=i(""),[c,C]=i(""),[g,R]=i(""),[U,k]=i(""),[r,ae]=i($.uuid||""),[f]=M(()=>$.uuid||null,Z);O(()=>{if(f()){const e=f();S(e.firstname),y(e.lastname),C(e.email),w(e.role)}});const A=async()=>{if(n().trim()===""||d().trim()===""||c().trim()===""){k("Please fill firstname, lastname and email.");return}let e=null;r()===""?e=await W(m(),n(),d(),c(),g()):e=await X(r(),m(),n(),d(),c(),g()),e.status===Q.Success?(Y(),h("/users")):k(e.message)};return(()=>{const e=re.cloneNode(!0);return t(e,l(b,{get when(){return r()===""||!f.loading},get children(){return[(()=>{const a=le.cloneNode(!0),o=a.firstChild;return t(a,()=>r()===""?"Add":"Edit",o),t(a,l(b,{get when(){return U()!==""},get children(){const u=te.cloneNode(!0);return t(u,U),u}}),null),a})(),(()=>{const a=se.cloneNode(!0),o=a.firstChild,u=o.firstChild,B=u.nextSibling,E=o.nextSibling,F=E.firstChild,L=F.nextSibling,I=E.nextSibling,j=I.firstChild,D=j.nextSibling,N=I.nextSibling,q=N.firstChild,z=q.nextSibling,T=N.nextSibling,G=T.firstChild,H=G.nextSibling,x=T.nextSibling,P=x.firstChild;return t(B,l(v,{get value(){return n()},onInput:s=>S(s.currentTarget.value)})),t(L,l(v,{get value(){return d()},onInput:s=>y(s.currentTarget.value)})),t(D,l(v,{type:"email",get value(){return c()},onInput:s=>C(s.currentTarget.value)})),t(z,l(v,{type:"password",get placeholder(){return r()===""?"":"Unchanged"},get value(){return g()},onInput:s=>R(s.currentTarget.value)})),t(H,l(ee,{label:"Select a role",options:[{value:"user",label:"User"},{value:"admin",label:"Admin"}],get selected(){return m()},onChange:s=>w(s.currentTarget.value)})),t(x,l(_,{label:"Save",onClick:A}),P),t(x,l(_,{label:"Cancel",onClick:()=>window.history.back()}),P),t(x,l(b,{get when(){return r()!==""},get children(){return l(_,{kind:"danger",label:"Delete",onClick:()=>V(r(),h)})}}),null),a})()]}})),e})()};export{xe as default};
